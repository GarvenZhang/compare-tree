{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./compareNextLayer.js","webpack:///./data.js","webpack:///./index.js","webpack:///./log.js","webpack:///./utils.js"],"names":["baseCur","refCur","base","ref","common","baseQueue","baseQueueLen","refQueue","baseCurValue","name","type","strMapToObj","strMap","obj","key","value","eq","item","index","baseCurItem","refCurItem","toString","call","changedList","push","objectHandle","Object","keys","length","hasOwnProperty","unshift","splice","indexOf","forEach","deletedList","addedList","arrayHandle","concat","slice","_baseCur","_refCur","memory","window","compare","baseTree","refTree","baseTreeName","Error","shift","compareRet","compareNextLayer","log","console","apply","prototype"],"mappings":"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","file":"compare.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import {\n  toString\n} from './utils'\nimport {\n  deletedList,\n  addedList,\n  changedList\n} from './data'\n\nlet baseCur\nlet refCur\nlet base\nlet ref\nlet common\nlet baseQueue\nlet baseQueueLen\nlet refQueue\nlet baseCurValue\nlet name\nlet type\n\n\n/**\n * 转换Map为Object\n * @param {Map} strMap\n */\nconst strMapToObj = (strMap) => {\n  const obj = {}\n  for (let [key, value] of strMap) {\n    obj[key] = value\n  }\n  return obj\n}\n\n/**\n * 比较common\n * @param {*} item - 项\n * @param {Number} index - 索引\n */\nconst eq = (item, index) => {\n  let baseCurItem = null\n  let refCurItem = null\n  let key = ''\n\n  switch (type) {\n    case '[object Map]':\n    case '[object Object]':\n      baseCurItem = baseCurValue[item]\n      refCurItem = refCur[item]\n      key = item\n      break\n\n    case '[object Set]':\n    case '[object Array]':\n      baseCurItem = item\n      refCurItem = refCur[index]\n      key = index\n      break\n  }\n\n  // null\n  if (baseCurItem === null && refCurItem === null) {\n    return\n  }\n\n  // NaN\n  if (baseCurItem !== baseCurItem && refCurItem !== refCurItem) {\n    return\n  }\n\n  // +0 & -0\n  if (\n    baseCurItem === 0 &&\n    refCurItem === 0 &&\n    1 / baseCurItem === 1 / refCurItem\n  ) {\n    return\n  }\n\n  if (toString.call(baseCurItem) !== toString.call(refCurItem)) {\n    changedList.push(['【更新了】:', name + item, '\\nbefore: ', baseCurItem, '\\nafter: ', refCurItem])\n    return\n  }\n  // 类似 'abc' 与 new String('abc')\n  switch (toString.call(baseCurItem)) {\n    case '[object RegExp]':\n    case '[object String]':\n      if ('' + baseCurItem === '' + refCurItem) {\n        return\n      }\n      break\n\n    case '[object Number]':\n      if (+baseCurItem !== +baseCurItem && +refCurItem !== +refCurItem) {\n        return\n      }\n      if (+baseCurItem === 0 && 1 / +baseCurItem === 1 / refCurItem) {\n        return\n      }\n      break\n\n    case '[object Date]':\n    case '[object Boolean]':\n    case '[object Function]':\n      if (+baseCurItem === +refCurItem) {\n        return\n      }\n      break\n\n    case '[object Object]':\n    case '[object Array]':\n    case '[object Set]':\n    case '[object Map]':\n      base.push({\n        key: name + key,\n        value: baseCurItem\n      })\n      ref.push(refCurItem)\n      return\n  }\n\n  if (baseCurItem !== refCurItem) {\n    changedList.push(['【更新了】:', name + key, '\\nbefore: ', baseCurItem, '\\nafter: ', refCurItem])\n  }\n}\n\nconst objectHandle = () => {\n  baseQueue = Object.keys(baseCurValue)\n  baseQueueLen = baseQueue.length\n  refQueue = Object.keys(refCur)\n  let key\n\n  while (baseQueueLen--) {\n    key = baseQueue[baseQueueLen]\n    if (refCur.hasOwnProperty(key)) {\n      common.unshift(key)\n      baseQueue.splice(baseQueueLen, 1)\n      refQueue.splice(refQueue.indexOf(key), 1)\n    }\n  }\n\n  // 层级: [路径] \\n 新增: [新增] \\n 删除: [删除]\n  baseQueue.forEach(function (item) {\n    deletedList.push(['【删除了】: ', name + item, '\\n值为:', baseCurValue[item]])\n  })\n  refQueue.forEach(function (item) {\n    addedList.push(['【新增了】: ', name + item, '\\n值为:', refCur[item]])\n  })\n\n  // 比较\n  common.forEach((item, index) => eq(item, index))\n}\n\nconst arrayHandle = () => {\n  baseQueue = baseCurValue.concat()\n  refQueue = refCur.concat()\n\n  // 按索引对号\n  if (baseQueue.length > refQueue.length) {\n    common = baseQueue.slice(0, refQueue.length)\n    baseQueue = baseQueue.slice(refQueue.length - 1)\n    refQueue.length = 0\n  } else if (baseQueue.length < refQueue.length) {\n    common = baseQueue\n    baseQueue.length = 0\n    refQueue = refQueue.slice(baseQueue.length - 1)\n  } else {\n    common = baseQueue.concat()\n    baseQueue.length = 0\n    refQueue.length = 0\n  }\n\n  // log\n  baseQueue.forEach(function (item, index) {\n    deletedList.push(['【删除了】: ', name + index, '\\n值为:', item])\n  })\n  refQueue.forEach(function (item, index) {\n    addedList.push(['【新增了】: ', name + index, '\\n值为:', item])\n  })\n\n  // 比较\n  common.forEach((item, index) => eq(item, index))\n}\n\n/**\n * 分情况\n * @param {*} _baseCur\n * @param {*} _refCur\n * @return {{base: Object, ref: Object}}\n */\nexport default function (_baseCur, _refCur) {\n  // 初始化\n  baseCur = _baseCur\n  refCur = _refCur\n  base = []\n  ref = []\n  common = []\n  baseQueue = []\n  baseQueueLen = 0\n  refQueue = []\n  baseCurValue = baseCur.value\n  name = baseCur.key + ' -> '\n  type = toString.call(baseCurValue)\n\n  // 可遍历\n  switch (type) {\n\n    case '[object Map]':\n      baseCurValue = strMapToObj(baseCurValue)\n      refCur = strMapToObj(refCur)\n    case '[object Object]':\n      objectHandle()\n      break\n\n    case '[object Set]':\n      baseCurValue = [...baseCurValue]\n      refCur = [...refCur]\n    case '[object Array]':\n      arrayHandle()\n      break\n  }\n\n  return {\n    base,\n    ref\n  }\n}\n","export const memory = []\nexport const deletedList = []\nexport const addedList = []\nexport const changedList = []\n","import compareNextLayer from './compareNextLayer'\nimport log from './log'\n\n// 快照比较, 防止 const a = {b: 1}, a.c = 2\n// 路径\n// 一定要比较到基本类型\n// bfs\n\n/**\n * 快照比较\n * @param {*} baseTree \n * @param {*} refTree \n * @param {*} baseTreeName \n */\nwindow.compare = function (baseTree, refTree, baseTreeName) {\n  if (typeof baseTreeName === 'undefined') {\n    throw new Error('必须提供第三个参数!')\n  }\n\n  let baseQueue = []\n  let refQueue = []\n\n  baseQueue.push({\n    key: baseTreeName,\n    value: baseTree\n  })\n  refQueue.push(refTree)\n\n  // 非递归bfs\n  while (baseQueue.length > 0) {\n\n    const baseCur = baseQueue.shift()\n    const refCur = refQueue.shift()\n\n    const compareRet = compareNextLayer(baseCur, refCur)\n    baseQueue = baseQueue.concat(compareRet.base)\n    refQueue = refQueue.concat(compareRet.ref)\n  }\n\n  // 报告\n  log()\n}\n","import {\n  deletedList,\n  addedList,\n  changedList\n} from './data'\n\n// 报告\nexport default () => {\n  deletedList.forEach(function (item) {\n    console.log.apply(null, item)\n  })\n  addedList.forEach(function (item) {\n    console.log.apply(null, item)\n  })\n  changedList.forEach(function (item) {\n    console.log.apply(null, item)\n  })\n}\n","export const toString = Object.prototype.toString\n"],"sourceRoot":""}